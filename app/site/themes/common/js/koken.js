(function(){window.$K={pulse:{plugins:{},groups:{},refs:{},overrides:{},register:function(e){this.refs[e.id]&&(this.refs[e.id].kill(),delete this.refs[e.id]);var t="#"+e.id,n=$(t).data("pulse-group");$(t).children(":not(div.cover)").remove(),this.groups[n]||(this.groups[n]=e.options);var r=this.groups[n],i=["width","height","dataUrl","data","next","previous"];return this.overrides[e.id]||(this.overrides[e.id]={}),$.each(i,$.proxy(function(t,n){e.options[n]&&(this.overrides[e.id][n]=e.options[n])},this)),this.refs[e.id]=Pulse(t,$.extend(r,this.overrides[e.id])),$.each(this.plugins,$.proxy(function(t,n){r[t+"_enabled"]&&this.refs[e.id][t](r)},this)),this.refs[e.id]}},navigation:{sets:[],init:!1,toggleChilds:function(e,t){var n=t&&t==="none"||$(e).hasClass("k-nav-open"),r=e.siblings("ul");if(!r.length)return;n?$(e).removeClass("k-nav-open"):$(e).addClass("k-nav-open"),r.css("display",n?"none":"block")},nest:function(){var e=$("a.k-nav-set"),t=this;if(this.sets.length===e.length)return;this.sets=e,$.each(this.sets,$.proxy(function(e,t){t.onclick===null&&(t.onclick=$.proxy(function(e){$(".k-nav-current").removeClass("k-nav-current"),this.toggleChilds($(t)),e.preventDefault()},this))},this)),this.setCurrent()},setCurrent:function(e){var t=RegExp("(http://"+location.host+")?"+$K.location.root_folder+"(/(index|preview).php)?"),e=e||location.href,n=e.replace(t,"").replace(/&rand=.*$/,"")||"/";$.each(this.sets,$.proxy(function(e,t){this.toggleChilds($(t),"none")},this)),$(".k-nav-current").removeClass("k-nav-current"),$.each($(".k-nav-root a:not(.k-nav-set)"),$.proxy(function(e,r){r=$(r);var i=r.attr("href").replace(t,"");if(n===i){r.addClass("k-nav-current");for(;;){r=r.parent();if(r.hasClass("k-nav-root"))break;r.get(0).nodeName.toLowerCase()==="ul"&&r.show()}}},this))}},keyboardBind:function(){$("[data-bind-to-key]").each(function(){var e=$(this),t=e.attr("data-bind-to-key");t.indexOf("→")!==-1&&(t=t.replace("→","right")),t.indexOf("←")!==-1&&(t=t.replace("←","left")),key.unbind(t),key(t,function(t,n){var r=e.attr("href");if(!r||r==="#"){e.trigger("click");return}var i=$._data(e.get(0),"events")&&$._data(e.get(0),"events").click;if(!i){var s=$._data(document,"events");s&&s.click&&$.each(s.click,function(t,n){if($.inArray(e.get(0),$(n.selector))!==-1)return i=!0,!1})}i?e.trigger("click"):window.location.href=r})})},keyboardScroll:function(e,t){t=t||0;var n=$(e),r=n.length-1,i=0,s=!1,o,u=function(n){if(n===37&&i===0||n===39&&i===r||n!==37&&n!==39)return;n===37?i--:n===39&&i++;var s=$(e).get(i).offsetTop+t;return $("html,body").animate({scrollTop:s}),!1};$(document).off(".kScroll").on("scroll.kScroll",function(){n.each(function(e,n){if($(n).offset().top+t>=$(document).scrollTop())return i=e,!1})}).on("keydown.kScroll",function(e){u(e.which)})},lazyLoad:function(){var e=$(window).height()+$(window).scrollTop(),t=$(window).width()+$(window).scrollLeft();$.each($("img.k-lazy-loading"),function(n,r){r=$(r);if(!r.attr("data-src"))return;var i=r.offset();if(i.top<=e&&i.top+r.height()>=$(window).scrollTop()&&i.left<=t&&i.left+r.width()>=$(window).scrollLeft()){var s=new Image;s.onload=function(){r.removeClass("k-lazy-loading");var e=r.data("lazy-fade");e&&r.css("opacity",.001),setTimeout(function(){r.addClass("k-lazy-loaded"),r.attr("src",r.attr("data-src")),r.animate({opacity:1},e,null,function(){$(this).trigger("k-image-loaded")})},0)},s.src=r.attr("data-src")}})},isRetina:function(){return $K.retinaEnabled&&("devicePixelRatio"in window&&devicePixelRatio>1||"matchMedia"in window&&matchMedia("(min-resolution:144dpi)").matches)},retinafyUrl:function(e){e=e.replace(".2x.",".");if(this.isRetina()){var t=e.lastIndexOf(".");e=e.substr(0,t)+".2x"+e.substr(t)}return e},loadImages:function(){var e=$("img[data-src]"),t=this;e.length&&$.each(e,function(e,n){var r=$(n),i=t.retinafyUrl(r.attr("data-src"));r.hasClass("k-lazy-loading")?r.attr("data-src",i):r.attr("src",i)})},lazyLoadInit:function(){var e=$("img.k-lazy-loading");e.length&&($.each(e,function(e,t){$(t).attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}),setTimeout(function(){$K.lazyLoad()},100))},resizeVideos:function(){$(".mejs-container video").each(function(){$v=$(this);var e=$v.data("aspect"),t=$v.parents(".mejs-container").parent().width(),n=t/e,r=this.player;r.setPlayerSize(t,n),r.setControlsSize();if(this.pluginType==="native"){var i={width:t,height:n};$v.attr(i).css(i)}else r.options.videoWidth=t,r.options.videoHeight=n/e,r.media.setVideoSize&&r.media.setVideoSize(t,n)})},responsiveBackgrounds:function(){var e=$("[data-bg-presets]"),t=this;$.each(e,function(){var e=$(this),n=e.width(),r=e.height(),i=n>=r?"width":"height",s=!1,o,u=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g,a=e.data("bg-presets");while(o=u.exec(a)){s=e.data("base")+","+o[1]+"."+e.data("extension");if(i==="width"){if(o[2]>=n)break}else if(o[3]>=r)break}s&&e.css({backgroundImage:"url("+t.retinafyUrl(s)+")",backgroundSize:"cover",backgroundPosition:"center center"})})},responsiveImages:function(){var e=$("img[data-presets]"),t=e.length,n=this,r,i,s,o,u,a,f,l,c;$.each(e,function(e,t){t=$(t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")),t.css("opacity",1))}),window.setTimeout(function(){e=$("img[data-presets]"),$.each(e,function(e,t){t=$(t),typeof t.data("originalDom")=="object"&&(t=t.replaceWith(t.data("originalDom")));var r=t.data("presets"),i=t.attr("src")||"",a=$.browser.msie?0:parseInt(t.css("width"),10)||0,h=$.browser.msie?0:parseInt(t.css("height"),10)||0,p=0,d=t,v;a<10&&(a=0),h<10&&(h=0);while(p===0){d=d.parent();var m=d.css("display");if(m=="none")return;m!="inline"&&!d.attr("data-koken-ignore-responsive")&&(p=d.width())}c=d.css("box-sizing");var g=h>0?h:d.height(),y=parseInt(t.css("max-height"),10);t.data("originalDom")||(a>0&&a!==p?(t.data("originalDom",t.clone()),p=Math.min(p,a)):t.data("originalDom","noreplace")),l=t.data("respond-to")||"width",isNaN(y)||(g=y,l==="width"&&(l=!1));var b=p/g,w,E=/([a-z_\.]+)\,([0-9]+)\,([0-9]+)/g;s=t.data("base"),o=t.data("extension"),cropTo=t.data("retain-aspect")||!1,t.attr("data-alt")&&(t.attr("alt",t.data("alt")),t.attr("data-alt",null));if(cropTo){var S=cropTo.split(":");b=S[0]/S[1],g=Math.round(p/b),t.attr("width",p),t.attr("height",g);var x=i.match(/\,([0-9]+)/);if(x){var T=Math.abs(p-x[1]);if(T/x[1]<.2)return}i=s+","+p+"."+g+".100.0.crop."+o}else{var N=!1,C=!1,k=0;while(w=E.exec(r)){u=w[1].indexOf(".crop")!==-1,f=w[2]/w[3],i=s+","+w[1]+"."+o,N=C=!1;if(u){if(l==="width"){if(w[2]>=p){k=p;break}}else if(l==="height"||y){if(w[3]>=g){k=g;break}}else if(w[2]>=p&&w[3]>=g){k=Math.min(p,g);break}}else if(l==="width"){if(w[2]>=p){t.attr("width",p),t.attr("height",Math.ceil(p/f));break}}else if(l==="height"){if(w[3]>=g){t.attr("height",g),t.attr("width",Math.ceil(g*f));break}}else{if(f>=b&&w[2]>=p){t.attr("width",p),t.attr("height",p/f);break}if(f<b&&w[3]>=g){t.attr("height",g),t.attr("width",Math.ceil(g*f));break}}N=w[2],C=w[3]}u?(t.attr("width",k),t.attr("height",k)):N&&(l==="height"&&C<g&&(C=g,N=Math.ceil(g*f)),t.attr("width",N),t.attr("height",C))}i=n.retinafyUrl(i),(t.hasClass("k-lazy-loading")||t.hasClass("k-lazy-loaded"))&&i!==t.attr("src")?(t.removeClass("k-lazy-loaded"),t.addClass("k-lazy-loading"),t.attr("data-src",i),t.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")):t.attr("src",i)}),setTimeout(function(){$K.lazyLoadInit()},0),$(window).trigger("k-resize")},0)},infinity:{$target:!1,isLoading:!1,bttn:!1,next:function(){if($K.location.parameters.page<this.totalPages){$(window).trigger("k-infinite-loading"),$K.location.parameters.page++,this.isLoading=!0;var e=this,t=location.href.match(/&preview=.*/)||"";$.ajax({url:$K.location.root+$K.location.here.replace(/\/$/,"")+"/page/"+$K.location.parameters.page+"/"+t,success:function(t){e.$target.before($(t).find(".k-infinite-load").children()),e.isLoading=!1,$(window).trigger("k-infinite-loaded"),$K.ready(),e.check()}}),$K.location.parameters.page===this.totalPages&&this.bttn&&this.bttn.addClass("k-disabled")}},check:function(){this.$target&&!this.isLoading&&this.$target.prev().offset().top<$(window).scrollTop()+$(window).height()&&this.next()},init:function(){if(this.$target)return;var e=$("span.k-infinite-load").first();if(e.length){e.append($("<br/>").css("display","none").addClass("k-infinite-marker")),e.replaceWith(e.html()),this.$target=$(".k-infinite-marker").first();if(this.selector!==""){var t=$(this.selector),n=this;this.bttn=t,t.length&&t.on("click",function(){n.next()})}}}},ready:function(){$("noscript").remove(),$K.responsiveImages(),$K.responsiveBackgrounds(),$K.loadImages(),$K.lazyLoadInit(),$K.navigation.nest(),$K.infinity.init(),$K.keyboardBind();var e;$("img").on("error",function(){var e=$(this),t=e.data("fails")||0;t<3&&(t++,e.attr("data-src")||e.attr("data-src",e.attr("src")),e.removeClass("k-lazy-loaded").addClass("k-lazy-loading"),setTimeout(function(){$K.lazyLoadInit()},100),e.data("fails",t))}),$(window).on("resize",function(){$K.resizeVideos(),clearTimeout(e),e=setTimeout(function(){$K.responsiveImages(),$K.responsiveBackgrounds(),$(window).trigger("k-resize")},250)});var t;$(window).off(".kjs").on("scroll.kjs",function(){clearTimeout(t),t=setTimeout(function(){$K.lazyLoad(),$K.infinity.bttn||$K.infinity.check()},50)}),$.pjax&&$(window).on("k-pjax-end",function(){var e=$("body").attr("class")||"";$("body").attr("class",e.replace(/k\-source\-([a-z]+)/,"")+$K.location.page_class)}),$K.infinity.check(),$(".k-content-embed").fitVids()}},$(document).ready(function(){$K.ready();if($K.location.referrer===undefined){var e=RegExp("https?://"+location.host+$K.location.root_folder+"(/(index|preview).php\\?)?"),t=document.referrer.replace(e,"");t.indexOf("http:")===0&&(t=!1);if($K.location.urls.album){var n=RegExp($K.location.urls.album.replace(/:[a-z_]+/,"[^/]+")+"/lightbox/?$");n.test(t)&&(t=t.replace(/\/lightbox\/?$/,""))}/\/lightbox\/?$/.test(t)&&$.cookie("koken_referrer")?t=$.cookie("koken_referrer"):/\/lightbox\/?$/.test(t)||$.cookie("koken_referrer",t,{path:"/"}),$K.location.referrer=t}})})(),function(e){"use strict";e.fn.fitVids=function(t){var n={customSelector:null},r=document.createElement("div"),i=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return r.className="fit-vids-style",r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",e(".fit-vids-style").length<=0&&i.parentNode.insertBefore(r,i),t&&e.extend(n,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.youtube-nocookie.com']","iframe[src*='www.kickstarter.com']","object","embed"];n.customSelector&&t.push(n.customSelector);var r=e(this).find(t.join(","));r.each(function(){var t=e(this);if(this.tagName.toLowerCase()==="embed"&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)return;var n=this.tagName.toLowerCase()==="object"||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),r=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),i=n/r;if(!t.attr("id")){var s="fitvid"+Math.floor(Math.random()*999999);t.attr("id",s)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",i*100+"%"),t.removeAttr("height").removeAttr("width")})})}}(jQuery),function(e){function t(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return-1}function n(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function r(e){for(b in E)E[b]=e[k[b]]}function i(e,n){var i,s,o,a,f;i=e.keyCode,t(C,i)==-1&&C.push(i);if(i==93||i==224)i=91;if(i in E){E[i]=!0;for(o in x)x[o]==i&&(u[o]=!0);return}r(e);if(!u.filter.call(this,e))return;if(!(i in w))return;for(a=0;a<w[i].length;a++){s=w[i][a];if(s.scope==n||s.scope=="all"){f=s.mods.length>0;for(o in E)if(!E[o]&&t(s.mods,+o)>-1||E[o]&&t(s.mods,+o)==-1)f=!1;(s.mods.length==0&&!E[16]&&!E[18]&&!E[17]&&!E[91]||f)&&s.method(e,s)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function s(e){var n=e.keyCode,r,i=t(C,n);i>=0&&C.splice(i,1);if(n==93||n==224)n=91;if(n in E){E[n]=!1;for(r in x)x[r]==n&&(u[r]=!1)}}function o(){for(b in E)E[b]=!1;for(b in x)u[b]=!1}function u(e,t,n){var r,i,s,o;r=v(e),n===undefined&&(n=t,t="all");for(s=0;s<r.length;s++)i=[],e=r[s].split("+"),e.length>1&&(i=m(e),e=[e[e.length-1]]),e=e[0],e=N(e),e in w||(w[e]=[]),w[e].push({shortcut:r[s],scope:t,method:n,key:r[s],mods:i})}function a(e,t){var r=e.split("+"),i=[],s,o;r.length>1&&(i=m(r),e=r[r.length-1]),e=N(e),t===undefined&&(t=p());if(!w[e])return;for(s in w[e])o=w[e][s],o.scope===t&&n(o.mods,i)&&(w[e][s]={})}function f(e){return typeof e=="string"&&(e=N(e)),t(C,e)!=-1}function l(){return C.slice(0)}function c(e){var t=(e.target||e.srcElement).tagName;return t!="INPUT"&&t!="SELECT"&&t!="TEXTAREA"}function h(e){S=e||"all"}function p(){return S||"all"}function d(e){var t,n,r;for(t in w){n=w[t];for(r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++}}function v(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function m(e){var t=e.slice(0,e.length-1);for(mi=0;mi<t.length;mi++)t[mi]=x[t[mi]];return t}function g(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){n(window.event)})}function y(){var t=e.key;return e.key=L,t}var b,w={},E={16:!1,18:!1,17:!1,91:!1},S="all",x={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},T={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},N=function(e){return T[e]||e.toUpperCase().charCodeAt(0)},C=[];for(b=1;b<20;b++)T["f"+b]=111+b;var k={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(b in x)u[b]=!1;g(document,"keydown",function(e){i(e,S)}),g(document,"keyup",s),g(window,"focus",o);var L=e.key;e.key=u,e.key.setScope=h,e.key.getScope=p,e.key.deleteScope=d,e.key.filter=c,e.key.isPressed=f,e.key.getPressedKeyCodes=l,e.key.noConflict=y,e.key.unbind=a,typeof module!="undefined"&&(module.exports=key)}(this),function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g,s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[s.raw?t:encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r,c=document.cookie.split("; "),h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(t&&t===m){h=i(g);break}t||(h[m]=i(g))}return h};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend(n,{expires:-1})),!0):!1}}(jQuery);